<app-admin-layout></app-admin-layout>
<div id="main-content">
    <div class="block-header">
        <div class="row clearfix">
            <div class="col-md-6 col-sm-12">
                <h2>Create User</h2>
            </div>
            <div class="col-md-6 col-sm-12 text-right">
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html"><i class="icon-home"></i></a></li>
                    <li class="breadcrumb-item active">Dashboard </li>
                      
                </ul>              
            </div>
        </div>
    </div>
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-12 col-xl-12">
            <div class="card">
              <div class="card-body">
                <p-tabView>
                  <p-tabPanel header="KYC Detail">
                    <ng-container *ngTemplateOutlet="keyDetailsTemplate"></ng-container>
                  </p-tabPanel>                 
                  <p-tabPanel header="Documents">
                    <ng-container *ngTemplateOutlet="imagesTemplate"></ng-container>
                  </p-tabPanel>
                </p-tabView>
                <ng-template #keyDetailsTemplate>
                  <div class="row home">
                    <div class="col-sm-12 col-xl-12">
                      <form id="kyc-form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" name="form" pFocusTrap
                        autocomplete="off">
                        <div class="modal-body">
                          <div class="row border-button">
                            <div class="col-xl-6 form-field">
                              <label>Full Name</label>
                              <input type="text" disabled class="form-control" name="fullName"
                                [(ngModel)]="kycDetail.fullName" #fullName="ngModel" required
                                [ngClass]="{ 'is-invalid': f.submitted && fullName.invalid }" />
                              <div *ngIf="f.submitted && fullName.invalid" class="invalid-feedback">
                                <div *ngIf="fullName.errors"> Full Name is required</div>
                              </div>
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>Email</label>
                              <input type="text" disabled class="form-control" name="email"
                                [(ngModel)]="kycDetail.email" />
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>Mobile Number</label>
                              <input type="text" class="form-control" disabled name="mobileNumber"
                                [(ngModel)]="kycDetail.mobileNumber" #mobileNumber="ngModel" required
                                [ngClass]="{ 'is-invalid': f.submitted && mobileNumber.invalid }" />
                              <div *ngIf="f.submitted && mobileNumber.invalid" class="invalid-feedback">
                                <div *ngIf="mobileNumber.errors"> Mobile Number is required</div>
                              </div>
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>Shop Name</label>
                              <input type="text" disabled class="form-control" name="shopName"
                                [(ngModel)]="kycDetail.shopName" #shopName="ngModel" required
                                [ngClass]="{ 'is-invalid': f.submitted && shopName.invalid }" />
                              <div *ngIf="f.submitted && shopName.invalid" class="invalid-feedback">
                                <div *ngIf="shopName.errors">Shop Name is required</div>
                              </div>
                            </div>
                          
                            <div class="col-xl-3 form-field">
                              <label>DOB</label>
                              <input type="date" class="form-control" name="dob"
                                [(ngModel)]="kycDetail.dob" />
                            </div>
                            <div class="col-xl-3 form-field">
                              <label>AEPS Code</label>
                              <input type="text" class="form-control" name="agentCode"
                                [(ngModel)]="kycDetail.agentCode" />
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>Address Details</label>
                              <textarea type="text" class="form-control" name="homeAddress"
                                [(ngModel)]="kycDetail.homeAddress" #homeAddress="ngModel" required
                                [ngClass]="{ 'is-invalid': f.submitted && homeAddress.invalid }"></textarea>

                              <div *ngIf="f.submitted && homeAddress.invalid" class="invalid-feedback">
                                <div *ngIf="homeAddress.errors">Address is required</div>
                              </div>
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>Office Address</label>
                              <textarea type="text" class="form-control" name="shopAddress"
                                [(ngModel)]="kycDetail.shopAddress" #shopAddress="ngModel" required
                                [ngClass]="{ 'is-invalid': f.submitted && shopAddress.invalid }"></textarea>
                              <div *ngIf="f.submitted && shopAddress.invalid" class="invalid-feedback">
                                <div *ngIf="shopAddress.errors">Shop/Office Address is required</div>
                              </div>
                            </div>
                            <div class="col-xl-5 form-field">
                              <label>Shop Image</label>
                              <input  type="file" accept="image/*"
                                class="form-control file" (change)="onFormSubmitFileSave($event, 'shop')" />                              
                            </div>
                            <div class="col-xl-1 form-field">
                              <label>&nbsp;</label>
                              <a href="javascript:void(0)" (click)="openModel(kycDetail?.shopPicture)"> <img
                                  class="form-control" [src]="getfilePath(kycDetail?.shopPicture)"></a>
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>State</label>
                              <ng-select [items]="stateList" bindLabel="name" bindValue="id"
                                name="state" [(ngModel)]="kycDetail.state" #state="ngModel" required
                                [ngClass]="{ 'is-invalid': f.submitted && state.invalid }">
                              </ng-select>
                              <div *ngIf="f.submitted && state.invalid" class="invalid-feedback">
                                <div *ngIf="state.errors">State is required</div>
                              </div>
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>Pin Code</label>
                              <input type="text" class="form-control" minlength="6" pattern="[0-9]*" maxlength="6"
                                name="pinCode" [(ngModel)]="kycDetail.pinCode" #pinCode="ngModel" required
                                [ngClass]="{ 'is-invalid': f.submitted && pinCode.invalid }" />
                              <div *ngIf="f.submitted && pinCode.invalid" class="invalid-feedback">
                                <div *ngIf="pinCode.errors">Pin Code is required</div>
                              </div>
                            </div>
                            <div class="col-xl-5 form-field">
                              <label>Profile Image</label>
                              <input type="file" accept="image/*"
                                class="form-control file" (change)="onFormSubmitFileSave($event, 'profile')" />
                             
                            </div>
                            <div class="col-xl-1 form-field">
                              <label>&nbsp;</label>
                              <a href="javascript:void(0)" (click)="openModel(kycDetail?.profilePicture)"> <img
                                  class="form-control" [src]="getfilePath(kycDetail?.profilePicture)"></a>
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>GST Number</label>
                              <input type="text" disabled class="form-control" name="gstNumber"
                                [(ngModel)]="kycDetail.gstNumber" />
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>Pan Card</label>
                              <input type="text" class="form-control" disabled name="panCard" [(ngModel)]="kycDetail.panCard" />
                            </div>
                            <div class="col-xl-5 form-field">
                              <label>Upload GST</label>
                              <input type="file" accept="image/*"
                                class="form-control file" (change)="onFormSubmitFileSave($event, 'CHEQUE')" />
                              
                            </div>
                            <div class="col-xl-1 form-field">
                              <label>&nbsp;</label>
                              <a href="javascript:void(0)" (click)="openModel(kycDetail?.chequePicture)"> <img
                                  class="form-control" [src]="getfilePath(kycDetail?.chequePicture)"></a>
                            </div>
                           
                            <div class="col-xl-5 form-field">
                              <label>Pan Card Image</label>
                              <input type="file" accept="image/*"
                                class="form-control file" (change)="onFormSubmitFileSave($event, 'PAN')" />
                          
                            </div>
                            <div class="col-xl-1 form-field">
                              <label>&nbsp;</label>
                              <a href="javascript:void(0)" (click)="openModel(kycDetail?.panCardPicture)"> <img
                                  class="form-control" [src]="getfilePath(kycDetail?.panCardPicture)"></a>
                            </div>
                            <div class="col-xl-6 form-field">
                              <label>Aadhar Card</label>
                              <input type="text" class="form-control" name="aadharCard"
                                [(ngModel)]="kycDetail.aadharCard" />
                            </div>
                            <div class="col-xl-5 form-field">
                              <label>Aadhar Card Front Image</label>
                              <input type="file" accept="image/*"
                                class="form-control file" (change)="onFormSubmitFileSave($event, 'ADHARF')" />                            
                            </div>
                            <div class="col-xl-1 form-field">
                              <label>&nbsp;</label>
                              <a href="javascript:void(0)" (click)="openModel(kycDetail?.aadharCardFrontPicture)"> <img
                                  class="form-control" [src]="getfilePath(kycDetail?.aadharCardFrontPicture)"></a>
                            </div>
                         <div class="col-xl-5 form-field">
                              <label>Aadhar Card Back Image</label>
                              <input type="file" accept="image/*"
                                class="form-control file" (change)="onFormSubmitFileSave($event, 'ADHARB')" />
                             
                            </div>
                            <div class="col-xl-1 form-field">
                              <label>&nbsp;</label>
                              <a href="javascript:void(0)" (click)="openModel(kycDetail?.aadharCardBackPicture)"> <img
                                  class="form-control" [src]="getfilePath(kycDetail?.aadharCardBackPicture)"></a>
                            </div>
                       
                         <div class="col-xl-5 form-field">
                              <label>Application Form Image</label>
                              <input type="file" accept="image/*"
                                class="form-control file" (change)="onFormSubmitFileSave($event, 'APPLICATION')" />
                              
                            </div>
                            <div class="col-xl-1 form-field">
                              <label>&nbsp;</label>
                              <a href="javascript:void(0)" (click)="openModel(kycDetail?.applicationFormPicture)"> <img
                                  class="form-control" [src]="getfilePath(kycDetail?.applicationFormPicture)"></a>
                            </div>                          
                            <div class="col-xl-6 form-field">
                              <label>Status</label>
                             
                              <ng-select [disabled]="disableValue" [items]="kycStatus" bindLabel="name" bindValue="id"
                                name="isStatus" [(ngModel)]="kycDetail.isStatus">
                              </ng-select>
                            </div>
                            <div class="col-xl-12 form-field">
                              <label>Remarks</label>
                              <textarea type="text" class="form-control" name="remarks" [(ngModel)]="kycDetail.remarks"
                                #remarks="ngModel" required
                                [ngClass]="{ 'is-invalid': f.submitted && remarks.invalid }"></textarea>
                              <div *ngIf="f.submitted && remarks.invalid" class="invalid-feedback">
                                <div *ngIf="remarks.errors">Remarks is required</div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="text-center pb-1">
                          <a (click)="backClicked()" href="javascript:void(0)" class="btn btn-secondary waves-effect">
                           << Back
                          </a> &nbsp;
                          <!-- *ngIf="isApproved && !disableValue" -->
                          <button *ngIf="!disableValue" type="submit" 
                            class="btn btn-primary waves-effect">
                            Save
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </ng-template>                
                <ng-template #imagesTemplate>
                  <div class="row images modal-body">
                    <div class="col-sm-4 col-xl-4 kycimg" >
                      <img [src]="getfilePath(kycDetail?.shopPicture)" alt="shopPicture" />
                    </div>
                    <div class="col-sm-4 col-xl-4 kycimg">
                      <img [src]="getfilePath(kycDetail?.profilePicture)" alt="profilePicture" />
                    </div>
                    <div class="col-sm-4 col-xl-4 kycimg">
                      <img [src]="getfilePath(kycDetail?.panCardPicture)" alt="panCardPicture" />
                    </div>
                    <div class="col-sm-4 col-xl-4 kycimg">
                      <img [src]="getfilePath(kycDetail?.aadharCardFrontPicture)" alt="aadharCardFrontPicture" />
                    </div>
                    <div class="col-sm-4 col-xl-4 kycimg">
                      <img [src]="getfilePath(kycDetail?.aadharCardBackPicture)" alt="aadharCardBackPicture" />
                    </div>
                    <div class="col-sm-4 col-xl-4 kycimg">
                      <img [src]="getfilePath(kycDetail?.chequePicture)" alt="chequePicture" />
                    </div>
                    <div class="col-sm-4 col-xl-4 kycimg">
                      <img [src]="getfilePath(kycDetail?.applicationFormPicture)" alt="applicationFormPicture" />
                    </div>
                  </div>
                </ng-template>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<div class="pageloader" *ngIf="isloder"></div>
<p-dialog header="Document" class="dailogbox" [baseZIndex]="10000" [style]="{'max-width': '60vw'}"
  [(visible)]="isModel">
  <img width="600px" src="{{filePath}}">
</p-dialog>
